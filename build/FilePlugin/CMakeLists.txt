message("Adding internal plugin: FilePlugin")
set(pluginName "FilePlugin")
set(pluginSrc "${srcPluginsDir}/FilePlugin")
set(pluginCross "${crossDir}/plugins/FilePlugin")
set(pluginPlatform "${targetPlatform}/plugins/FilePlugin")
set(LINKLIBS )
add_definitions(-DSQUEAK_BUILTIN_PLUGIN)
list(APPEND sources  "${pluginSrc}/FilePlugin.c")
include_directories(${pluginSrc} ${pluginCross} ${targetPlatform}/plugins/${pluginName})
list(APPEND sources  "${pluginCross}/sqFilePluginBasicPrims.c")
list(APPEND sources  "${pluginPlatform}/sqUnixFile")
add_library(FilePlugin STATIC ${sources})
set(linkFlags "${linkFlags} -m32")
set_property(TARGET FilePlugin PROPERTY LINK_FLAGS "${linkFlags}")
IF (FilePlugin_dependencies)
add_dependencies(FilePlugin ${FilePlugin_dependencies})
ENDIF (FilePlugin_dependencies)

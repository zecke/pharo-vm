message("Adding internal plugin: FloatMathPlugin")
set(pluginName "FloatMathPlugin")
set(pluginSrc "${srcPluginsDir}/FloatMathPlugin")
set(pluginCross "${crossDir}/plugins/FloatMathPlugin")
set(pluginPlatform "${targetPlatform}/plugins/FloatMathPlugin")
set(LINKLIBS )
add_definitions(-DSQUEAK_BUILTIN_PLUGIN)
list(APPEND sources  "${pluginSrc}/FloatMathPlugin.c")
include_directories(${pluginSrc} ${pluginCross} ${targetPlatform}/plugins/${pluginName})
list(APPEND sources  "${pluginCross}/acos.c" "${pluginCross}/acosh.c" "${pluginCross}/asin.c" "${pluginCross}/asinh.c" "${pluginCross}/atan.c" "${pluginCross}/atan2.c" "${pluginCross}/atanh.c" "${pluginCross}/copysign.c" "${pluginCross}/cos.c" "${pluginCross}/cosh.c" "${pluginCross}/exp.c" "${pluginCross}/expm1.c" "${pluginCross}/finite.c" "${pluginCross}/fmod.c" "${pluginCross}/hypot.c" "${pluginCross}/isnan.c" "${pluginCross}/k_cos.c" "${pluginCross}/k_rem_pio2.c" "${pluginCross}/k_sin.c" "${pluginCross}/k_tan.c" "${pluginCross}/ldexp.c" "${pluginCross}/log.c" "${pluginCross}/log10.c" "${pluginCross}/log1p.c" "${pluginCross}/modf.c" "${pluginCross}/pow.c" "${pluginCross}/rem_pio2.c" "${pluginCross}/rint.c" "${pluginCross}/scalb.c" "${pluginCross}/scalbn.c" "${pluginCross}/sin.c" "${pluginCross}/sinh.c" "${pluginCross}/sqrt.c" "${pluginCross}/tan.c" "${pluginCross}/tanh.c")
add_definitions(-O0)
add_definitions(-D__LITTLE_ENDIAN=1)

if (${WIN32})
	add_definitions(-Werror-implicit-function-declaration)	
else(${WIN32})
	add_definitions(-DNO_ISNAN)
endif (${WIN32})
add_library(FloatMathPlugin STATIC ${sources})
set(linkFlags "${linkFlags} -m32")
set_property(TARGET FloatMathPlugin PROPERTY LINK_FLAGS "${linkFlags}")
IF (FloatMathPlugin_dependencies)
add_dependencies(FloatMathPlugin ${FloatMathPlugin_dependencies})
ENDIF (FloatMathPlugin_dependencies)

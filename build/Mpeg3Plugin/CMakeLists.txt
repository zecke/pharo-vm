message("Adding internal plugin: Mpeg3Plugin")
set(pluginName "Mpeg3Plugin")
set(pluginSrc "${srcPluginsDir}/Mpeg3Plugin")
set(pluginCross "${crossDir}/plugins/Mpeg3Plugin")
set(pluginPlatform "${targetPlatform}/plugins/Mpeg3Plugin")
set(LINKLIBS )
add_definitions(-DSQUEAK_BUILTIN_PLUGIN)
list(APPEND sources  "${pluginSrc}/Mpeg3Plugin.c")
include_directories(${pluginSrc} ${pluginCross} ${targetPlatform}/plugins/${pluginName})
include_directories(${pluginCross}/libmpeg ${pluginCross}/libmpeg/audio ${pluginCross}/libmpeg/video)
list(APPEND sources  "${pluginCross}/libmpeg/bitstream.c" "${pluginCross}/libmpeg/changesForSqueak.c" "${pluginCross}/libmpeg/audio/dct.c" "${pluginCross}/libmpeg/video/getpicture.c" "${pluginCross}/libmpeg/audio/header.c" "${pluginCross}/libmpeg/video/headers.c" "${pluginCross}/libmpeg/video/idct.c" "${pluginCross}/libmpeg/audio/layer1.c" "${pluginCross}/libmpeg/audio/layer2.c" "${pluginCross}/libmpeg/audio/layer3.c" "${pluginCross}/libmpeg/libmpeg3.c" "${pluginCross}/libmpeg/video/macroblocks.c" "${pluginCross}/libmpeg/video/mmxtest.c" "${pluginCross}/libmpeg/video/motion.c" "${pluginCross}/libmpeg/mpeg3atrack.c" "${pluginCross}/libmpeg/audio/mpeg3audio.c" "${pluginCross}/libmpeg/mpeg3demux.c" "${pluginCross}/libmpeg/mpeg3io.c" "${pluginCross}/libmpeg/mpeg3title.c" "${pluginCross}/libmpeg/video/mpeg3video.c" "${pluginCross}/libmpeg/mpeg3vtrack.c" "${pluginCross}/libmpeg/video/output.c" "${pluginCross}/libmpeg/audio/pcm.c" "${pluginCross}/libmpeg/video/reconstruct.c" "${pluginCross}/libmpeg/video/seek.c" "${pluginCross}/libmpeg/video/slice.c" "${pluginCross}/libmpeg/audio/synthesizers.c" "${pluginCross}/libmpeg/audio/tables.c" "${pluginCross}/libmpeg/video/vlc.c")
add_library(Mpeg3Plugin STATIC ${sources})
set(linkFlags "${linkFlags} -m32")
set_property(TARGET Mpeg3Plugin PROPERTY LINK_FLAGS "${linkFlags}")
IF (Mpeg3Plugin_dependencies)
add_dependencies(Mpeg3Plugin ${Mpeg3Plugin_dependencies})
ENDIF (Mpeg3Plugin_dependencies)

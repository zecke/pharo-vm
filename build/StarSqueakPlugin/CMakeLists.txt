message("Adding internal plugin: StarSqueakPlugin")
set(pluginName "StarSqueakPlugin")
set(pluginSrc "${srcPluginsDir}/StarSqueakPlugin")
set(pluginCross "${crossDir}/plugins/StarSqueakPlugin")
set(pluginPlatform "${targetPlatform}/plugins/StarSqueakPlugin")
set(LINKLIBS )
add_definitions(-DSQUEAK_BUILTIN_PLUGIN)
list(APPEND sources  "${pluginSrc}/StarSqueakPlugin.c")
include_directories(${pluginSrc} ${pluginCross} ${targetPlatform}/plugins/${pluginName})
add_library(StarSqueakPlugin STATIC ${sources})
set(linkFlags "${linkFlags} -m32")
set_property(TARGET StarSqueakPlugin PROPERTY LINK_FLAGS "${linkFlags}")
IF (StarSqueakPlugin_dependencies)
add_dependencies(StarSqueakPlugin ${StarSqueakPlugin_dependencies})
ENDIF (StarSqueakPlugin_dependencies)

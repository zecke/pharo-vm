message("Adding external plugin: SqueakFFIPrims")
set(pluginName "SqueakFFIPrims")
set(pluginSrc "${srcPluginsDir}/SqueakFFIPrims")
set(pluginCross "${crossDir}/plugins/SqueakFFIPrims")
set(pluginPlatform "${targetPlatform}/plugins/SqueakFFIPrims")
set(LINKLIBS )
list(APPEND sources  "${pluginSrc}/SqueakFFIPrims.c")
include_directories(${pluginSrc} ${pluginCross} ${targetPlatform}/plugins/${pluginName})
list(APPEND sources  "${pluginCross}/sqFFIPlugin.c" "${pluginCross}/sqFFITestFuncs.c" "${pluginCross}/sqManualSurface.c")
add_library(SqueakFFIPrims SHARED ${sources})
set(LIBRARY_OUTPUT_PATH ${outputDir})
set(linkFlags "${linkFlags} -m32")
target_link_libraries(SqueakFFIPrims ${LINKLIBS})
set_property(TARGET SqueakFFIPrims PROPERTY LINK_FLAGS "${linkFlags}")
IF (SqueakFFIPrims_dependencies)
add_dependencies(SqueakFFIPrims ${SqueakFFIPrims_dependencies})
ENDIF (SqueakFFIPrims_dependencies)
